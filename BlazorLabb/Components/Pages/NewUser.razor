@page "/newuser"
@rendermode InteractiveServer
@using BlazorLabb.Models

<PageTitle>New User</PageTitle>

<h1>New User</h1>

<EditForm Model="_newUser" OnValidSubmit="HandleSubmit">
    <DataAnnotationsValidator />
    <ValidationSummary />

    @if (!_newUserSaved)
    {
        <p>Add a new user:</p>
        <div>
            <InputText placeholder="Name" @bind-Value="_newUser.Name" />
            <br />
            <InputText placeholder="E-mail" @bind-Value="_newUser.Email" />
            <br />
            <InputText placeholder="Street" @bind-Value="_newUser.UserAddress.Street" />
            <br />
            <InputText placeholder="City" @bind-Value="_newUser.UserAddress.City" />
            <br />
            <InputText placeholder="ZIP Code" @bind-Value="_newUser.UserAddress.ZipCode" />
            <br />
            <InputText placeholder="Company Name" @bind-Value="_newUser.UserCompany.Name" />
            <br />
            <InputText placeholder="Company Catchpharse" @bind-Value="_newUser.UserCompany.Catchphrase" />
        </div>

        <button type="submit">Save New User</button>
    }
    else
    {
        <p style="color: green">You have saved the following user:</p>
        <p>Name: @_newUser.Name</p>
        <p>E-Mail: @_newUser.Email</p>
        <p>Street: @_newUser.UserAddress.Street</p>
        <p>City: @_newUser.UserAddress.City</p>
        <p>ZIP Code: @_newUser.UserAddress.ZipCode</p>
        <p>Company Name: @_newUser.UserCompany.Name</p>
        <p>Company Catchpharse: @_newUser.UserCompany.Catchphrase</p>
    }    

</EditForm>

@code {
    private User _newUser = new User();
    private bool _newUserSaved = false;

    private void HandleSubmit()
    {
        _newUserSaved = true;
    }

    //To do: Lägg till en ny skapad user till dina local skapade users...
}